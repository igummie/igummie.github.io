(function(){function z(a,b){return-1<a.indexOf(b)?a:-1<a.indexOf("?")?a+"&"+b:a+"?"+b}function M(a){for(var b=0;a&&a.getAttribute("class")!==r;)a=a.parentNode,b++,4<b&&(a=null);(b=a&&a.parentNode)&&b.getAttribute("class")===t&&(a.removeAttribute("style"),a.removeAttribute("class"),b.removeAttribute("style"))}function Y(a){a.removeAttribute("data-iframely-url");a.removeAttribute("data-iframely-loading")}function Z(a,b){if(E){var c;c=a;for(var d=!1;!d&&c.parentNode;)c=c.parentNode,d=c.className&&0<=
c.className.split(" ").indexOf(E);if(c=d&&c){(d=c.parentNode)&&d.removeChild(c);return}}c=b&&b.originalElement;if(!c&&a&&"A"===a.nodeName&&(a.textContent||a.innerText))Y(a),M(a);else{if(b&&b.iframeContainer)d=b.iframeContainer;else{var d=a,e=A(a);e&&(d=e.maxWidthWrapper)}e=d.parentNode;c&&("A"===c.nodeName&&(c.textContent||c.innerText))&&(Y(a),e.insertBefore(c,d));e.removeChild(d)}}function N(a){a=a.getBoundingClientRect();var b=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||
document.documentElement.clientWidth,d=2*b,e=2*c;if(0<=a.bottom&&0<=a.right&&a.top<=b&&a.left<=c)return ja;if(a.bottom>=0-d&&a.right>=0-e&&a.top<=b+d&&a.left<=c+e)return $}function aa(a){for(var b=0,c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];d.nodeType===Node.TEXT_NODE?(d=d.textContent||d.innerText,(d=d.replace(/\s|\n/g,""))&&b++):d.nodeType===Node.ELEMENT_NODE&&b++}return b}function A(a,b){var c=a.parentNode;if(c&&!("DIV"!==c.nodeName||2<aa(c)||b&&c.getAttribute("class")!==r||!b&&"relative"!==
c.style.position&&c.getAttribute("class")!==r)){var d=c.parentNode;if(d&&!("DIV"!==d.nodeName||1<aa(d)||b&&d.getAttribute("class")!==t))return{aspectWrapper:c,maxWidthWrapper:d}}}function ka(a){var b=O(a);a=b.url;var c=b.api_key,b=b.key,d=[];a&&d.push("url="+encodeURIComponent(a));c&&d.push("api_key="+encodeURIComponent(c));b&&d.push("key="+encodeURIComponent(b));return"/api/thumbnail?"+d.join("&")}function ba(a,b){var c=A(a);if(c){var d;if(b.match(/\/api\/iframe\?.+/))d=b.replace(/\/api\/iframe\?.+/,
ka(b));else if(b.match(/^(?:https?:)?\/\/[^\/]+\/[a-zA-Z0-9]+(?:\?.*)?$/))d=b.replace(/^((?:https?:)?\/\/[^\/]+\/[a-zA-Z0-9]+)((?:\?.*)?)$/,"$1/thumbnail");else return;var e=document.createElement("div");e.style.position="absolute";e.style.top="0";e.style.width="100%";e.style.height="100%";e.style.backgroundImage="url('"+d+"')";e.style.backgroundSize="cover";e.style.backgroundPosition="center";d=document.createElement("div");d.setAttribute("class",la);e.appendChild(d);d=c.aspectWrapper.style["padding-top"];
var f=c.aspectWrapper.style["padding-bottom"];!f&&-1<c.aspectWrapper.className.indexOf(r)&&(f=ca);if(d&&f&&d.match(/^\d+px$/)){var m=document.createElement("div");m.style.left=0;m.style.top="-"+d;m.style.width="100%";m.style.height=0;m.style.position="relative";m.style["padding-bottom"]=f;m.appendChild(e);c.aspectWrapper.appendChild(m)}else c.aspectWrapper.appendChild(e)}}function da(a){var b=(a=A(a))&&a.aspectWrapper&&1<a.aspectWrapper.childNodes.length&&a.aspectWrapper.childNodes[1];b&&"DIV"===
b.nodeName&&a.aspectWrapper.removeChild(b)}function ma(a,b){setTimeout(function(){na(a)},b==$?oa:pa)}function na(a){function b(){d++;d===c&&(clearTimeout(e),setTimeout(function(){da(a)},qa))}var c=a.hasAttribute("data-direct")?1:2,d=0,e;a.addEventListener?a.addEventListener("load",b):a.attachEvent("onload",b);e=setTimeout(function(){b()},ra);var f=a.getAttribute("data-iframely-url");f&&(a.removeAttribute("data-iframely-url"),a.removeAttribute("data-iframely-loading"),a.setAttribute("src",f))}function ea(){if(!document.getElementById(fa)){var a=
fa,b=sa,c=document.createElement("style");c.id=a;c.type="text/css";c.styleSheet?c.styleSheet.cssText=b:c.innerHTML=b;document.getElementsByTagName("head")[0].appendChild(c)}}function P(a,b){ea();var c=b;c||(c=A(a));c&&(a.style.top="",a.style.left="",a.style.width="",a.style.height="",a.style.position="",a.style.border="",c.aspectWrapper.style.top="",c.aspectWrapper.style.left="",c.aspectWrapper.style.width="",c.aspectWrapper.style.position="",c.aspectWrapper.className=r,c.maxWidthWrapper.className=
t)}function ta(a,b){var c=A(a);P(a,c);var d=a.getAttribute("data-max-width");d&&(b["max-width"]=d);if(b&&(b.frame_style&&a.setAttribute("data-frame-style",b.frame_style),b.scrolling&&a.setAttribute("scrolling",b.scrolling),d=a.getAttribute("data-frame-style"),c)){var e=c.aspectWrapper,s=c.maxWidthWrapper,m=e.clientHeight;a.removeAttribute("style");d&&a.setAttribute("style",d);e.removeAttribute("style");s.removeAttribute("style");b&&b.height&&b.width&&!b["aspect-ratio"]?(s.style.width=b.width+"px",
e.style.height=b.height+"px",e.style.paddingBottom=0):(b["aspect-ratio"]?(e.style["padding-bottom"]=Math.round(1E5/b["aspect-ratio"])/1E3+"%",b["padding-bottom"]&&(e.style.paddingTop=b["padding-bottom"]+"px")):(b.height&&(e.style.height=b.height+"px",e.style.paddingBottom=0),b.width&&(e.style.width=b.width+"px")),(b["max-width"]||b["min-width"])&&["max-width","min-width"].forEach(function(a){var c=b[a];if(c){if("number"===typeof c||"string"===typeof c&&c.match(/^(\d+)?\.?(\d+)?$/))c+="px";s.style[a]=
c}}),f.checkLazyLoad());(function(){var b=e.clientHeight;m!=b&&x.trigger("heightChanged",a,m,b)})()}}function O(a){if(a=a.match(/\?(.+)/i)){a=a[1];a=a.split("&");for(var b={},c=0;c<a.length;c++){var d=a[c].split("=");b[d[0]]=decodeURIComponent(d[1])}return b}return{}}function ua(){var a=!1;try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")?!0:!1}catch(b){a=navigator.mimeTypes&&void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin?
!0:!1}return a}var n=window.iframely=window.iframely||{},f=n.widgets=n.widgets||{},x=n.events=n.events||{},y=f._iframes=f._iframes||[],Q=f._global_iframes=f._global_iframes||[],h=f._lazy_iframes=f._lazy_iframes||[],H=f._lazy_widgets=f._lazy_widgets||[],R=f._import_links=f._import_links||{},I,J,S,K,G,E,T,ga,L,F,U=/^(?:https?:)?\/\/[^\/]+/,va=/^(?:https?:)?\/\/[^\/]+\/(\w+)(?:\?.*)?$/,ca="56.25%",oa=200,pa=0,ra=1E4,qa=200;f.load||(n.load=f.load=function(){if(0===arguments.length){var a=document.querySelectorAll("[data-iframely-url]"),
b;if(!(-1<navigator.userAgent.toLowerCase().indexOf("firefox"))&&1<a.length&&"file:"!==document.location.protocol&&"import"in(b=document.createElement("link"))){for(var c=[],d=[],e={},s,m,v,B,g,k,h,l,n,r=function(a,b){e[a]||(e[a]=[]);e[a].push(b)},z=function(){for(var a in e)for(var b=e[a],c=0;c<b.length;c++){var d=b[c];"import"===d.getAttribute("data-iframely-loading")&&(d.removeAttribute("data-iframely-loading"),f.createWidget(d))}},C=0;C<a.length;C++){var q=a[C];if(!q.getAttribute("data-iframely-loading")){var p=
q.getAttribute("data-iframely-url");s=(s=p.match(U))&&s[0]||G;var D=p.match(va),u=D&&D[1],t,x=!1,D=p.match(/app=(true|1)/),y=(t=p.match(/media=([\w-]+)/))&&t[1];!F&&(n&&y!==n)&&(x=!0);F&&(y&&F!==y)&&(x=!0);"IFRAME"===q.nodeName&&D&&(x=!0);D=function(){B=B||p.match(/align=left/);n=n||y;g=g||(t=p.match(/iframe=([\w-]+)/))&&t[1];k=k||p.match(/autoplay=(true|1)/);l=l||p.match(/playerjs=(true|1)/);var a=p.match(/maxwidth=(\d+)/);a&&(h=h||a[1])};x?f.createWidget(q):u?(q.setAttribute("data-iframely-loading",
"import"),-1===d.indexOf(u)&&d.push(u),r(u,q),D()):(v=O(p),(u=v.url)||(u=q.getAttribute("href")),m=v.api_key||I,v=v.key||J,(m||v)&&u?(q.setAttribute("data-iframely-loading","import"),-1===c.indexOf(u)&&c.push(u),r(u,q),D()):f.createWidget(q))}}if((0<c.length||0<d.length)&&s){b.rel="import";b.href=s+"/api/import?app=1";ua()?b.href+="&flash=1":b.href+="&flash=0";0<c.length&&(c=c.map(function(a){return"uri="+encodeURIComponent(a)}),b.href+="&"+c.join("&"));0<d.length&&(b.href+="&ids="+encodeURIComponent(d.join("&")));
m?b.href+="&api_key="+m:v&&(b.href+="&key="+v);if(B||"left"===L)b.href+="&align=left";g&&(b.href+="&iframe="+(g||void 0));k&&(b.href+="&autoplay=1");if(h||K)b.href+="&maxwidth="+(h||K);if(l||ga)b.href+="&playerjs=1";if(n||F)b.href+="&media="+(n||F);var E=function(a){for(var b=(a=a["import"])?a.querySelectorAll("template[data-uri]"):[],c=0;c<b.length;c++){var d=b[c],m=d.getAttribute("data-iframe-src"),s=d.hasAttribute("data-cancel"),k=d.hasAttribute("data-shadow"),g=d.getAttribute("data-uri"),v=d.hasAttribute("data-render-event"),
B=e[g];if(B){for(var n=0;n<B.length;n++){var h=B[n];if(s)Z(h);else if(m)h.removeAttribute("data-iframely-loading"),f.createWidget(h,{directIframeSrc:m});else{var q=document.importNode(d.content,!0),l,p,w=!v&&A(h,!0);w?(l=w.aspectWrapper.parentNode,p=w.aspectWrapper,w.maxWidthWrapper.removeAttribute("style")):(l=h.parentNode,p=h);var u=T||h.hasAttribute("data-lazy");if("IFRAME"===h.nodeName)h.removeAttribute("data-iframely-loading"),f.createWidget(h);else{if(k){var r=document.createElement("div"),
t=r.createShadowRoot();t.appendChild(q);f.applyCardStyles&&f.applyCardStyles({shadowRoot:t,container:l,sourceTemplate:d,importDoc:a});q=r}r=v&&function(){var a=l;return function(){setTimeout(function(){M(a)},5E3)}}();!u||N(h)?(l.insertBefore(q,p),l.removeChild(p),r&&r()):(w?(w=p,h.parentNode.removeChild(h)):(w=document.createElement("div"),l.insertBefore(w,p),l.removeChild(p),w.style.width="100%",w.style.height="400px"),H.push({container:w,widget:q,widgetAfterRenderCb:r}))}}}delete e[g]}}z()};b.onload=
function(){E(b)};b.onerror=function(){z()};b.href in R?E(R[b.href]):(R[b.href]=b,document.head.appendChild(b))}}else for(C=0;C<a.length;C++)q=a[C],f.createWidget(q)}else 1===arguments.length?f.createWidget(arguments[0]):2===arguments.length&&f.createWidgetInContainer(arguments[0],arguments[1])});f.createWidgetInContainer||(f.createWidgetInContainer=function(a,b){var c=document.createElement("a");c.setAttribute("href",b);c.textContent=b;a.appendChild(c);f.createWidget(c)});f.createWidget||(f.createWidget=
function(a,b){if(!a.getAttribute("data-iframely-loading")){a.setAttribute("data-iframely-loading",!0);var c=a.getAttribute("data-iframely-url"),d=a.hasAttribute("data-img"),e=c&&c.match(/^((?:https?:)?\/\/[^\/]+)\/\w+/i),e=e&&e[1],s=T||a.hasAttribute("data-lazy")||"IFRAME"===a.nodeName;if("IFRAME"===a.nodeName)P(a),b&&b.directIframeSrc&&a.setAttribute("data-direct",""),s?(d&&(ba(a,c),c=z(c,"img=1")),a.setAttribute("data-iframely-url",b&&b.directIframeSrc||c),h.push({iframe:a})):(a.setAttribute("src",
b&&b.directIframeSrc||c),a.removeAttribute("data-iframely-url"),a.removeAttribute("data-iframely-loading")),y.push({iframe:a});else{var m=a.getAttribute("href"),l,g=A(a,!0);g?(l=g.maxWidthWrapper.parentNode,P(a,g)):(l=a.parentNode,ea());var n=a.getAttribute("data-max-width"),k;!m||c&&e?c&&(k=z(c,"app=1"),"auto"===n&&(c=l.clientWidth)&&(k=z(k,"maxwidth="+c)),L&&(k=z(k,"align="+L))):(n=n||K,k="/api/iframe?app=1&url="+encodeURIComponent(m),k=J?G+k+"&key="+J:I?G+k+"&api_key="+I:"http://open.iframe.ly"+
k,S&&(k+="&"+S));if(k){e=k.match(/^(https?:)?\/\//i);e[1]||"file:"!==document.location.protocol||(k="http:"+k);e=document.createElement("iframe");if(g){for(c=g.maxWidthWrapper;g.aspectWrapper.lastChild;)g.aspectWrapper.removeChild(g.aspectWrapper.lastChild);g.aspectWrapper.appendChild(e)}else c=document.createElement("div"),c.className=t,m=document.createElement("div"),m.className=r,c.appendChild(m),m.appendChild(e);n&&parseInt(n)&&(c.setAttribute("style","max-width: "+n+"px;"),e.setAttribute("data-max-width",
n));y.push({iframe:e,iframeContainer:c,originalElement:a});g||(l.insertBefore(c,a),l.removeChild(a));s?(d&&(ba(e,k),k=z(k,"img=1")),e.setAttribute("data-iframely-url",k),e.setAttribute("data-iframely-loading",!0),h.push({iframe:e})):e.setAttribute("src",k)}}f.checkLazyLoad()}});var r="iframely-responsive",t="iframely-embed",la="iframely-loader";f.importedWidgetRendered||(f.importedWidgetRendered=M);if(!x.on){var V={};x.on=function(a,b){(V[a]=V[a]||[]).push(b)};x.trigger=function(a){var b=Array.prototype.slice.call(arguments,
1),c=V[a]||[];c.forEach(function(a){a.apply(c,b)})}}f.ready||(f.ready=function(a){"function"===typeof a&&a()});for(var n=function(){return{postMessage:function(a,b,c){a=JSON.stringify(a);c=c||window.parent;window.postMessage&&c.postMessage(a,(b||"*").replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},receiveMessage:function(a){function b(b){var d;try{d=JSON.parse(b.data)}catch(e){}a(b,d)}if(window.postMessage)if(window.addEventListener)window[a?"addEventListener":"removeEventListener"]("message",b,!1);else window[a?
"attachEvent":"detachEvent"]("onmessage",b)}}}(),ha=document.querySelectorAll("script"),W=0;W<ha.length&&!G;W++){var l=ha[W].getAttribute("src");if(l&&l.match(/\/embed\.js/)){var l=l.replace(/&amp;/gi,"&"),g=O(l);I=g.api_key;J=g.key;K=g.maxwidth;E=g.parent;T=g.lazy;ga=g.playerjs;L=g.align;F=g.media;delete g.api_key;delete g.key;var ia=[],X;for(X in g)ia.push(X+"="+encodeURIComponent(g[X]));S=ia.join("&");G=(l=l.match(U)||document.location.href.match(U))&&l[0]||"https://iframe.ly"}}f.checkLazyLoad||
(f._checkLazyLoad=function(){f.checkLazyLoadTimeout&&clearTimeout(f.checkLazyLoadTimeout);f.checkLazyLoadTimeout=null;for(var a=0;a<h.length;){var b=h[a].iframe,c=N(b);c?(h.splice(a,1),ma(b,c)):a++}for(a=0;a<H.length;)b=H[a],(c=N(b.container))?(H.splice(a,1),c=b,b=c.container.parentNode,b.insertBefore(c.widget,c.container),b.removeChild(c.container),c.widgetAfterRenderCb&&c.widgetAfterRenderCb()):a++},f.checkLazyLoad=function(){f.checkLazyLoadTimeout||(f.checkLazyLoadTimeout=setTimeout(f._checkLazyLoad,
300))},window.addEventListener?(addEventListener("scroll",f.checkLazyLoad,!0),addEventListener("resize",f.checkLazyLoad,!0)):window.attachEvent&&(attachEvent("onscroll",f.checkLazyLoad),attachEvent("onresize",f.checkLazyLoad)));f.receiveMessageRegistered||(f.receiveMessageRegistered=!0,n.receiveMessage(function(a,b){if(b&&b.method){for(var c=null,d=null,e=0;e<y.length&&!c;e++){var f=y[e];f.iframe.contentWindow===a.source&&(c=f.iframe,d=f)}if(!c)for(e=0;e<Q.length&&!c;e++)f=Q[e],f.contentWindow===
a.source&&(c=f);if(!c)for(var g=document.querySelectorAll("iframe"),e=0;e<g.length&&!c;e++)f=g[e],f.contentWindow===a.source&&(Q.push(f),c=f);if(c&&"widgetRendered"===b.method){for(e=0;e<h.length;)f=h[e].iframe,c===f?h.splice(e,1):e++;da(c)}!c||"setIframelyWidgetSize"!==b.method&&"resize"!==b.method&&"setIframelyEmbedData"!==b.method||ta(c,b.data&&b.data.media||{height:b.height});c&&"cancelWidget"===b.method&&Z(c,d)}}));var ja=1,$=2,fa="iframely-styles",sa=".iframely-responsive{top: 0;left: 0;width: 100%;height: 0;position: relative;padding-bottom: "+
ca+";}.iframely-responsive>*{top: 0;left: 0;width: 100%;height: 100%;position: absolute;border: 0;}";(function(a){"complete"!==document.readyState&&"interactive"!==document.readyState||a();document.addEventListener?document.addEventListener("DOMContentLoaded",a):window.attachEvent("onload",a)})(function(){f.load()});(f._e||[]).forEach(function(a){"function"===typeof a&&a()})})();
